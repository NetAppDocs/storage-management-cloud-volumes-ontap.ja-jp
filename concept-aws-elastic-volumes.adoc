---
sidebar: sidebar 
permalink: concept-aws-elastic-volumes.html 
keywords: elastic volumes, ev, ebs elastic volumes, ebs, amazon ebs, disk growth 
summary: Cloud Volumes ONTAPアグリゲートによる Amazon EBS Elastic Volumes 機能のサポートにより、パフォーマンスが向上し、容量が追加されるとともに、必要に応じて基盤となるディスク容量を自動的に増やすことができます。 
---
= Cloud Volumes ONTAPによる AWS Elastic Volumes のサポートについて学ぶ
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Cloud Volumes ONTAPアグリゲートによる Amazon EBS Elastic Volumes 機能のサポートにより、パフォーマンスが向上し、容量が追加されるとともに、 NetAppコンソールが必要に応じて基盤となるディスク容量を自動的に増やすことが可能になります。



== 利点

* ダイナミックディスクの拡張
+
コンソールは、Cloud Volumes ONTAP の実行中、およびディスクがまだ接続されている間に、ディスクのサイズを動的に増やすことができます。

* パフォーマンスの向上
+
エラスティック ボリュームが有効になっているアグリゲートには、2 つの RAID グループ間で均等に利用される最大 8 個のディスクを含めることができます。この構成により、スループットが向上し、パフォーマンスが安定します。

* より大きな骨材
+
8 つのディスクをサポートすることで、最大合計容量は 128 TiB になります。これらの制限は、Elastic Volumes 機能が有効になっていないアグリゲートの 6 ディスク制限および 96 TiB 制限よりも高くなります。

+
システム全体の容量制限は同じままであることに注意してください。



https://aws.amazon.com/ebs/features/["AWSドキュメント: AWSのElastic Volumesの詳細"^]



== サポートされている構成

Amazon EBS Elastic Volumes 機能は、特定のCloud Volumes ONTAPバージョンおよび特定の EBS ディスクタイプでサポートされています。



=== Cloud Volumes ONTAPバージョン

Elastic Volumes 機能は、バージョン 9.11.0 以降で作成された新しいCloud Volumes ONTAPシステムでサポートされています。この機能は、9.11.0 より前に導入された既存のCloud Volumes ONTAPシステムではサポートされていません。

たとえば、 Cloud Volumes ONTAP 9.9.0 システムを作成し、後でそのシステムをバージョン 9.11.0 にアップグレードした場合、Elastic Volumes 機能はサポートされません。バージョン 9.11.0 以降を使用して導入された新しいシステムである必要があります。



=== EBSディスクタイプ

汎用 SSD (gp3) またはプロビジョニングされた IOPS SSD (io1) を使用する場合、Elastic Volumes 機能は集約レベルで自動的に有効になります。エラスティック ボリューム機能は、他のディスク タイプを使用するアグリゲートではサポートされません。



== 必要なAWS権限

3.9.19 リリース以降、コンソール エージェントでは、 Cloud Volumes ONTAPアグリゲートの Elastic Volumes 機能を有効にして管理するために次の権限が必要です。

* ec2:ボリュームの変更の説明
* ec2:ボリュームの変更


これらの権限は、 https://docs.netapp.com/us-en/bluexp-setup-admin/reference-permissions-aws.html["NetAppが提供するポリシー"^]



== エラスティックボリュームのサポートの仕組み

エラスティック ボリューム機能が有効になっているアグリゲートは、1 つまたは 2 つの RAID グループで構成されます。各 RAID グループには、同じ容量を持つ 4 つの同一ディスクがあります。以下は、それぞれ 2.5 TiB のディスク 4 つを持つ 10 TiB アグリゲートの例です。

image:diagram-aws-elastic-volumes-one-raid-group.png["同じサイズの 4 つのディスクで構成されたアグリゲートと RAID グループを示す概念図。"]

コンソールがアグリゲートを作成すると、1 つの RAID グループから開始されます。追加の容量が必要な場合は、RAID グループ内のすべてのディスクの容量を同じ量だけ増やすことによってアグリゲートを拡張します。容量の増加は、最小 256 GiB またはアグリゲートのサイズの 10% のいずれかになります。

たとえば、1 TiB のアグリゲートがある場合、各ディスクは 250 GiB になります。アグリゲートの容量の 10% は 100 GiB です。これは 256 GiB より小さいため、アグリゲートのサイズは最小の 256 GiB (またはディスクごとに 64 GiB) だけ増加されます。

コンソールは、Cloud Volumes ONTAPシステムの実行中、およびディスクがまだ接続されている間に、ディスクのサイズを増加します。変更は中断を伴いません。

アグリゲートが 64 TiB (または各ディスクで 16 TiB) に達すると、コンソールは追加容量用に 2 番目の RAID グループを作成します。この 2 番目の RAID グループは最初のグループと同じように動作します。つまり、まったく同じ容量を持つ 4 つのディスクがあり、最大 64 TiB まで拡張できます。つまり、アグリゲートの最大容量は 128 TiB になります。

以下は、2 つの RAID グループを持つアグリゲートの例です。最初の RAID グループでは容量制限に達していますが、2 番目の RAID グループのディスクには十分な空き領域があります。

image:diagram-aws-elastic-volumes-two-raid-groups.png["同じサイズの 4 つのディスクで構成されたアグリゲートと 2 つの RAID グループを示す概念図。"]



=== ボリュームを作成すると何が起こるか

gp3 または io1 ディスクを使用するボリュームを作成する場合、コンソールは次のようにアグリゲート上にボリュームを作成します。

* エラスティック ボリュームが有効になっている既存の gp3 または io1 アグリゲートがある場合、コンソールはそのアグリゲート上にボリュームを作成します。
* エラスティック ボリュームが有効になっている gp3 または io1 アグリゲートが複数ある場合、コンソールは、必要なリソースが最も少ないアグリゲート上にボリュームを作成します。
* システムに、Elastic Volumes が有効になっていない gp3 または io1 アグリゲートのみがある場合は、そのアグリゲート上にボリュームが作成されます。
+
[NOTE]
====
このシナリオは起こりそうにありませんが、次の 2 つの場合には起こり得ます。

** API からアグリゲートを作成するときに、Elastic Volumes 機能を明示的に無効にしました。
** ユーザー インターフェイスから新しいCloud Volumes ONTAPシステムを作成しましたが、この場合、初期アグリゲートで Elastic Volumes 機能が無効になっています。レビュー<<制限事項>>詳細については以下をご覧ください。


====
* 既存のアグリゲートに十分な容量がない場合、コンソールはエラスティック ボリュームを有効にしたアグリゲートを作成し、その新しいアグリゲート上にボリュームを作成します。
+
アグリゲートのサイズは、要求されたボリューム サイズに 10% の追加容量を加えたものに基づきます。





=== 容量管理モード

コンソール エージェントの容量管理モードは、他の種類のアグリゲートと同様に、エラスティック ボリュームでも機能します。

* 自動モードが有効になっている場合 (これがデフォルトの設定です)、追加の容量が必要な場合、コンソールは自動的にアグリゲートのサイズを増やします。
* 容量管理モードを手動に変更すると、コンソールは追加容量の購入の承認を求めます。


link:concept-storage-management.html#capacity-management["容量管理モードの詳細"] 。



== 制限事項

集計のサイズを増やすには最大 6 時間かかる場合があります。その間、コンソールはそのアグリゲートに対して追加の容量を要求することはできません。



== エラスティックボリュームの使い方

エラスティック ボリュームを使用して次のタスクを実行できます。

* gp3 または io1 ディスクを使用する場合は、初期アグリゲートでエラスティック ボリュームが有効になっている新しいシステムを作成します。
+
link:task-deploying-otc-aws.html["Cloud Volumes ONTAPシステムの作成方法を学ぶ"]

* エラスティックボリュームが有効になっているアグリゲートに新しいボリュームを作成します
+
gp3 または io1 ディスクを使用するボリュームを作成すると、コンソールは、エラスティック ボリュームが有効になっているアグリゲート上にボリュームを自動的に作成します。詳細については、<<ボリュームを作成すると何が起こるか>> 。

+
link:task-create-volumes.html["ボリュームの作成方法を学ぶ"] 。

* エラスティックボリュームを有効にした新しいアグリゲートを作成する
+
Cloud Volumes ONTAPシステムがバージョン 9.11.0 以降で作成されている限り、gp3 または io1 ディスクを使用する新しいアグリゲートでは Elastic Volumes が自動的に有効になります。

+
アグリゲートを作成すると、コンソールにアグリゲートの容量サイズの入力を求めるプロンプトが表示されます。これは、ディスク サイズとディスクの数を選択する他の構成とは異なります。

+
次のスクリーンショットは、gp3 ディスクで構成された新しいアグリゲートの例を示しています。

+
image:screenshot-aggregate-size-ev.png["集約サイズを TiB 単位で入力する gp3 ディスクの集約ディスク画面のスクリーンショット。"]

+
link:task-create-aggregates.html["集計の作成方法を学ぶ"] 。

* エラスティックボリュームが有効になっているアグリゲートを識別する
+
「詳細割り当て」ページに移動すると、アグリゲートで Elastic Volumes 機能が有効になっているかどうかを確認できます。次の例では、aggr1 で Elastic Volumes が有効になっています。

+
image:screenshot_elastic_volume_enabled.png["2 つの集計を示すスクリーンショット。1 つには、「Elastic Volumes Enabled」というテキストのフィールドがあります。"]

* 集約に容量を追加する
+
コンソールは必要に応じて自動的にアグリゲートに容量を追加しますが、手動で容量を増やすこともできます。

+
link:task-manage-aggregates.html["総容量を増やす方法を学ぶ"] 。

* エラスティックボリュームが有効になっているアグリゲートにデータを複製する
+
宛先のCloud Volumes ONTAPシステムが Elastic Volumes をサポートしている場合、宛先ボリュームは Elastic Volumes が有効になっているアグリゲートに配置されます (gp3 または io1 ディスクを選択した場合)。

+
https://docs.netapp.com/us-en/bluexp-replication/task-replicating-data.html["データレプリケーションの設定方法を学ぶ"^]


