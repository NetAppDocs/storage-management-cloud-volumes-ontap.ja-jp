---
sidebar: sidebar 
permalink: task-manage-volumes.html 
keywords: volumes, managing, cloning, editing, CIFS server, edit, flexclone, snapshot copy, restore, mount, delete, cifs setup, DNS, active directory, AD, domain, NetBIOS, identify, move, capacity, action required, clone, snapshot copies, restoring, vol move, volume move, move a volume, volume move slow, volume move performance 
summary: NetApp Consoleを使用すると、ボリュームと CIFS サーバーを管理できます。また、容量の問題を回避するためにボリュームを移動するように促すメッセージも表示されます。 
---
= Cloud Volumes ONTAPシステム上のボリュームを管理する
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
NetApp Consoleでボリュームと CIFS サーバーを管理できます。容量の問題を回避するためにボリュームを移動することもできます。

ボリュームは、 NetApp Consoleの標準ビューで管理することも、コンソールに組み込まれているONTAP System Manager を使用して管理し、高度なボリューム管理を行うこともできます。標準ビューでは、ボリュームを変更するためのオプションが限定的に提供されます。 System Manager は、クローン作成、サイズ変更、ランサムウェア対策、分析、保護、アクティビティ追跡の設定変更、階層間でのボリュームの移動など、高度なレベルの管理機能を提供します。詳細については、link:task-administer-advanced-view.html["System Manager を使用してCloud Volumes ONTAPを管理する"] 。



== ボリュームを管理する

コンソールの標準ビューを使用すると、ストレージのニーズに応じてボリュームを管理できます。ボリュームを表示、編集、複製、復元、削除できます。

.手順
. 左側のナビゲーション メニューから、*ストレージ > 管理* を選択します。
. *システム*ページで、ボリュームを管理するCloud Volumes ONTAPシステムをダブルクリックします。
. *ボリューム*タブを選択します。
+
image:screenshot_manage_vol_button.png["「ボリューム」タブの「ボリュームの管理」ボタンのスクリーンショット。"]

. 必要なボリューム タイルで、[ボリュームの管理] をクリックします。
+
[cols="30,70"]
|===
| Task | アクション 


| ボリュームに関する情報を表示する | ボリュームの管理パネルのボリュームアクションで、*ボリュームの詳細の表示*をクリックします。 


| NFSマウントコマンドを取得する  a| 
.. ボリュームの管理パネルのボリュームアクションで、*マウントコマンド*をクリックします。
.. *コピー*をクリックします。




| ボリュームをクローニングする  a| 
.. ボリュームの管理パネルのボリュームアクションで、*ボリュームの複製*をクリックします。
.. 必要に応じてクローン名を変更し、「*クローン*」をクリックします。


このプロセスにより、 FlexCloneボリュームが作成されます。  FlexCloneボリュームは、メタデータに少量のスペースを使用し、データが変更または追加された場合にのみ追加のスペースを消費するため、スペース効率に優れた書き込み可能なポイントインタイム コピーです。

FlexCloneボリュームの詳細については、 http://docs.netapp.com/ontap-9/topic/com.netapp.doc.dot-cm-vsmg/home.html["ONTAP 9 論理ストレージ管理ガイド"^] 。



| ボリュームを編集する（読み取り/書き込みボリュームのみ）  a| 
.. ボリューム管理パネルのボリュームアクションで、*ボリューム設定の編集*をクリックします。
.. ボリュームのスナップショット ポリシー、NFS プロトコル バージョン、NFS アクセス制御リスト (エクスポート ポリシー)、または共有アクセス許可を変更し、[適用] をクリックします。



NOTE: カスタム スナップショット ポリシーが必要な場合は、 ONTAP System Manager を使用して作成できます。



| ボリュームを削除する  a| 
.. ボリュームの管理パネルのボリュームアクションで、*ボリュームの削除*をクリックします。
.. 「ボリュームの削除」ウィンドウで、削除するボリュームの名前を入力します。
.. もう一度「*削除*」をクリックして確認します。




| オンデマンドでスナップショットコピーを作成する  a| 
.. [ボリュームの管理] パネルの [保護アクション] で、[*スナップショット コピーの作成*] をクリックします。
.. 必要に応じて名前を変更し、「作成」をクリックします。




| スナップショットコピーから新しいボリュームにデータを復元する  a| 
.. [ボリュームの管理] パネルの [保護アクション] で、[スナップショット コピーからの復元] をクリックします。
.. スナップショット コピーを選択し、新しいボリュームの名前を入力して、[復元] をクリックします。




| 基盤となるディスクの種類を変更する  a| 
.. 「ボリュームの管理」パネルの「詳細アクション」で、「*ディスク タイプの変更*」をクリックします。
.. ディスクの種類を選択し、[変更] をクリックします。



NOTE: コンソールは、選択したディスク タイプを使用する既存のアグリゲートにボリュームを移動するか、ボリュームの新しいアグリゲートを作成します。



| 階層化ポリシーを変更する  a| 
.. 「ボリュームの管理」パネルの「詳細アクション」で、「階層化ポリシーの変更」をクリックします。
.. 別のポリシーを選択し、「変更」をクリックします。



NOTE: コンソールは、階層化されている選択されたディスク タイプを使用する既存のアグリゲートにボリュームを移動するか、ボリュームの新しいアグリゲートを作成します。



| ボリュームを削除する  a| 
.. ボリュームを選択し、「削除」をクリックします。
.. ダイアログにボリュームの名前を入力します。
.. もう一度「*削除*」をクリックして確認します。


|===




== ボリュームのサイズを変更する

デフォルトでは、ボリュームの容量が不足すると、ボリュームは自動的に最大サイズまで拡張されます。デフォルト値は 1,000 です。つまり、ボリュームのサイズは 11 倍まで拡張できます。この値は、コンソール エージェントの設定で構成できます。

ボリュームのサイズを変更する必要がある場合は、コンソールのONTAP System Manager から変更できます。

.手順
. ONTAP System Manager を通じてボリュームのサイズを変更するには、System Manager ビューをクリックします。。 link:task-administer-advanced-view.html#how-to-get-started["始め方"] 。
. 左側のナビゲーション メニューから、*ストレージ > ボリューム*を選択します。
. ボリュームのリストから、サイズを変更するボリュームを特定します。
. オプションアイコンをクリックしますimage:screenshot_gallery_options.gif["ケバブのアイコン"]。
. *サイズ変更*を選択します。
. *ボリュームのサイズ変更*画面で、必要に応じて容量とスナップショット予約率を編集します。既存の使用可能なスペースと変更された容量を比較できます。
. *保存*をクリックします。


image:screenshot-resize-volume.png["ボリュームのサイズ変更後に変更された容量が画面に表示されます"]

ボリュームのサイズを変更するときは、システムの容量制限を必ず考慮してください。に行く https://docs.netapp.com/us-en/cloud-volumes-ontap-relnotes/index.html["Cloud Volumes ONTAPリリースノート"^]詳細についてはこちらをご覧ください。



== CIFSサーバーを変更する

DNS サーバーまたは Active Directory ドメインを変更する場合は、クライアントにストレージを引き続き提供できるように、 Cloud Volumes ONTAPの CIFS サーバーを変更する必要があります。

.手順
. Cloud Volumes ONTAPシステムの *概要* タブで、右側のパネルの下にある *機能* タブをクリックします。
. CIFS セットアップ フィールドの下にある *鉛筆アイコン* をクリックして、CIFS セットアップ ウィンドウを表示します。
. CIFS サーバーの設定を指定します。
+
[cols="30,70"]
|===
| Task | アクション 


| ストレージVM（SVM）を選択 | Cloud Volume ONTAPストレージ仮想マシン (SVM) を選択すると、設定されている CIFS 情報が表示されます。 


| 参加するActive Directoryドメイン | CIFS サーバーが参加する Active Directory (AD) ドメインの FQDN。 


| ドメインへの参加を許可された資格情報 | AD ドメイン内の指定された組織単位 (OU) にコンピューターを追加するのに十分な権限を持つ Windows アカウントの名前とパスワード。 


| DNSプライマリおよびセカンダリIPアドレス | CIFS サーバーの名前解決を提供する DNS サーバーの IP アドレス。リストされている DNS サーバーには、CIFS サーバーが参加するドメインの Active Directory LDAP サーバーとドメイン コントローラを見つけるために必要なサービス ロケーション レコード (SRV) が含まれている必要があります。ifdef::gcp[] Google マネージド Active Directory を設定している場合、AD にはデフォルトで 169.254.169.254 の IP アドレスでアクセスできます。endif::gcp[] 


| DNSドメイン | Cloud Volumes ONTAPストレージ仮想マシン (SVM) の DNS ドメイン。ほとんどの場合、ドメインは AD ドメインと同じです。 


| CIFS server NetBIOS name | AD ドメイン内で一意の CIFS サーバー名。 


| 組織単位  a| 
CIFS サーバーに関連付ける AD ドメイン内の組織単位。デフォルトは CN=Computers です。

ifdef::aws[]

** AWS Managed Microsoft AD をCloud Volumes ONTAPの AD サーバーとして設定するには、このフィールドに *OU=Computers,OU=corp* と入力します。


endif::aws[]

ifdef::azure[]

** Azure AD Domain Services をCloud Volumes ONTAPの AD サーバーとして構成するには、このフィールドに *OU=AADDC Computers* または *OU=AADDC Users* と入力します。link:https://docs.microsoft.com/en-us/azure/active-directory-domain-services/create-ou["Azure ドキュメント: Azure AD Domain Services マネージド ドメインに組織単位 (OU) を作成する"^]


endif::azure[]

ifdef::gcp[]

** Google Managed Microsoft AD をCloud Volumes ONTAPの AD サーバーとして構成するには、このフィールドに *OU=Computers,OU=Cloud* と入力します。link:https://cloud.google.com/managed-microsoft-ad/docs/manage-active-directory-objects#organizational_units["Google Cloud ドキュメント: Google Managed Microsoft AD の組織単位"^]


endif::gcp[]

|===
. *設定*をクリックします。


.結果
Cloud Volumes ONTAP は、変更内容に応じて CIFS サーバーを更新します。



== ボリュームの移動

容量使用率、パフォーマンス向上、およびサービス レベル アグリーメントの達成のためにボリュームを移動します。

ONTAP System Manager でボリュームを移動するには、ボリュームと移動先のアグリゲートを選択し、ボリューム移動操作を開始し、オプションでボリューム移動ジョブを監視します。  System Manager を使用すると、ボリューム移動操作は自動的に終了します。

.手順
. ONTAP System Manager またはONTAP CLI を使用して、ボリュームをアグリゲートに移動します。
+
ほとんどの場合、System Manager を使用してボリュームを移動できます。

+
手順については、link:http://docs.netapp.com/ontap-9/topic/com.netapp.doc.exp-vol-move/home.html["ONTAP 9 ボリューム移動エクスプレスガイド"^] 。





== コンソールに「アクションが必要です」というメッセージが表示されたらボリュームを移動します

コンソールには、容量の問題を回避するためにボリュームの移動が必要であるが、問題を自分で修正する必要があることを示すアクションが必要なメッセージが表示される場合があります。このような場合は、問題を修正する方法を特定し、1 つ以上のボリュームを移動する必要があります。


TIP: アグリゲートの使用容量が 90% に達すると、コンソールにこれらのアクションが必要なメッセージが表示されます。データ階層化が有効になっている場合、アグリゲートの使用容量が 80% に達するとメッセージが表示されます。デフォルトでは、データ階層化用に 10% の空き領域が予約されています。link:task-tiering.html#changing-the-free-space-ratio-for-data-tiering["データ階層化の空き領域比率について詳しく見る"^] 。

.手順
. <<容量の問題を修正する方法を特定する>> 。
. 分析に基づいて、容量の問題を回避するためにボリュームを移動します。
+
** <<容量の問題を回避するためにボリュームを別のシステムに移動する>> 。
** <<容量の問題を回避するためにボリュームを別のアグリゲートに移動する>> 。






=== 容量の問題を修正する方法を特定する

コンソールが容量の問題を回避するためにボリュームを移動するための推奨事項を提供できない場合は、移動する必要があるボリュームを特定し、それらを同じシステム上の別のアグリゲートに移動するべきか、別のシステムに移動するべきかを識別する必要があります。

.手順
. 容量制限に達したアグリゲートを識別するには、「アクションが必要」メッセージの詳細情報を表示します。
+
たとえば、詳細情報には次のような内容が表示されます: アグリゲート aggr1 が容量制限に達しました。

. アグリゲートから移動する 1 つ以上のボリュームを特定します。
+
.. Cloud Volumes ONTAPシステムで、*Aggregates タブ*をクリックします。
.. 集計タイルで、image:icon-action.png[""]アイコンをクリックし、[集計の詳細を表示] をクリックします。
.. *アグリゲートの詳細*画面の*概要*タブで、各ボリュームのサイズを確認し、アグリゲートから移動する 1 つ以上のボリュームを選択します。
+
将来的に追加の容量の問題を回避するために、アグリゲート内のスペースを解放するのに十分な大きさのボリュームを選択する必要があります。

+
image::screenshot_aggr_volume_overview.png[スクリーンショット aggr ボリュームの概要]



. システムがディスク制限に達していない場合は、ボリュームを同じシステム上の既存のアグリゲートまたは新しいアグリゲートに移動する必要があります。
+
詳細については、<<move-volumes-aggregate-capacity,容量の問題を回避するためにボリュームを別のアグリゲートに移動する>> 。

. システムがディスク制限に達した場合は、次のいずれかを実行します。
+
.. 未使用のボリュームを削除します。
.. ボリュームを再配置してアグリゲート上のスペースを解放します。
+
詳細については、<<move-volumes-aggregate-capacity,容量の問題を回避するためにボリュームを別のアグリゲートに移動する>> 。

.. 2 つ以上のボリュームを、スペースのある別のシステムに移動します。
+
詳細については、<<move-volumes-aggregate-capacity,容量の問題を回避するためにボリュームを別のアグリゲートに移動する>> 。







=== 容量の問題を回避するためにボリュームを別のシステムに移動する

容量の問題を回避するために、1 つ以上のボリュームを別のCloud Volumes ONTAPシステムに移動できます。システムがディスク制限に達した場合は、これを実行する必要があるかもしれません。

.タスク概要
次の「アクションが必要」メッセージを修正するには、このタスクの手順に従います。

[]
====
容量の問題を回避するにはボリュームを移動する必要がありますが、システムがディスク制限に達したため、コンソールはこのアクションを実行できません。

====
.手順
. 使用可能な容量を持つCloud Volumes ONTAPシステムを特定するか、新しいシステムを展開します。
. ソース システムをターゲット システムにドラッグ アンド ドロップして、ボリュームの 1 回限りのデータ レプリケーションを実行します。
+
詳細については、link:https://docs.netapp.com/us-en/bluexp-replication/task-replicating-data.html["システム間でのデータの複製"^] 。

. 「レプリケーション ステータス」ページに移動し、 SnapMirror関係を解除して、複製されたボリュームをデータ保護ボリュームから読み取り/書き込みボリュームに変換します。
+
詳細については、link:https://docs.netapp.com/us-en/bluexp-replication/task-replicating-data.html#managing-data-replication-schedules-and-relationships["データ複製スケジュールと関係の管理"^] 。

. データ アクセス用にボリュームを構成します。
+
データアクセス用の宛先ボリュームの設定については、link:http://docs.netapp.com/ontap-9/topic/com.netapp.doc.exp-sm-ic-fr/home.html["ONTAP 9 ボリューム ディザスタ リカバリ エクスプレス ガイド"^] 。

. 元のボリュームを削除します。
+
詳細については、link:task-manage-volumes.html#manage-volumes["ボリュームを管理する"] 。





=== 容量の問題を回避するためにボリュームを別のアグリゲートに移動する

容量の問題を回避するために、1 つ以上のボリュームを別のアグリゲートに移動できます。

.タスク概要
次の「アクションが必要」メッセージを修正するには、このタスクの手順に従います。

[]
====
容量の問題を回避するには 2 つ以上のボリュームを移動する必要がありますが、コンソールではこのアクションを自動的に実行することはできません。

====
.手順
. 既存のアグリゲートに、移動する必要があるボリュームに使用可能な容量があるかどうかを確認します。
+
.. Cloud Volumes ONTAPシステムで、*Aggregates タブ*をクリックします。
.. 必要な集計タイルで、image:icon-action.png[""]アイコンをクリックし、次に*集計の詳細を表示*をクリックして、使用可能な容量（プロビジョニングされたサイズから使用された集計容量を差し引いたもの）を表示します。
+
image::screenshot_aggr_capacity.png[スクリーンショット集約容量]



. 必要に応じて、既存のアグリゲートにディスクを追加します。
+
.. 集計を選択し、image:icon-action.png[""]アイコン > *ディスクの追加*。
.. 追加するディスクの数を選択し、「*追加*」をクリックします。


. 使用可能な容量を持つアグリゲートがない場合は、新しいアグリゲートを作成します。
+
詳細については、link:task-create-aggregates.html["集計の作成"^] 。

. ONTAP System Manager またはONTAP CLI を使用して、ボリュームをアグリゲートに移動します。
. ほとんどの場合、System Manager を使用してボリュームを移動できます。
+
手順については、link:http://docs.netapp.com/ontap-9/topic/com.netapp.doc.exp-vol-move/home.html["ONTAP 9 ボリューム移動エクスプレスガイド"^] 。





== ボリューム移動が遅くなる理由

Cloud Volumes ONTAPに次のいずれかの条件が当てはまる場合、ボリュームの移動に予想よりも時間がかかることがあります。

* ボリュームはクローンです。
* ボリュームはクローンの親です。
* ソースまたは宛先アグリゲートには、単一のスループット最適化 HDD (st1) ディスクがあります。
* 集約の 1 つは、オブジェクトに古い命名スキームを使用します。両方の集約は同じ名前形式を使用する必要があります。
+
9.4 リリース以前でアグリゲートに対してデータ階層化が有効になっている場合は、古い命名スキームが使用されます。

* 暗号化設定がソース集約と宛先集約で一致していないか、キー再生成が進行中です。
* 階層化ポリシーを変更するために、ボリューム移動時に _-tiering-policy_ オプションが指定されました。
* ボリューム移動時に _-generate-destination-key_ オプションが指定されました。




== FlexGroupボリュームを表示

ONTAP System Manager またはONTAP CLI を通じて作成されたFlexGroupボリュームは、コンソールの [ボリューム] タブから直接表示できます。専用の「ボリューム」タイルから FleGroup ボリュームの詳細情報を確認できます。ここでは、アイコンのホバー テキストから各FlexGroupボリューム グループを識別できます。さらに、ボリューム リスト ビューの「ボリューム スタイル」列でFlexGroupボリュームを識別および並べ替えることもできます。

image::screenshot_show_flexgroup_vol.png[スクリーンショット flexgroup ボリュームを表示]


NOTE: 現在、コンソールでは既存のFlexGroupボリュームのみを表示できます。コンソールでFlexGroupボリュームを作成することはできません。
