---
sidebar: sidebar 
permalink: concept-azure-file-sig-verify.html 
keywords: Azure, image, VHD, file signature verification, encryption, sha256, ONTAP, Cloud Volumes, CLI, 
summary: Cloud Volumes ONTAPイメージダイジェスト ファイル ツールを使用してエクスポートされた VHD ファイルの署名を検証する方法を理解します。 
---
= Cloud Volumes ONTAPの Azure Marketplace イメージ署名検証
:hardbreaks:
:allow-uri-read: 
:nofooter: 
:icons: font
:linkattrs: 
:imagesdir: ./media/


[role="lead"]
Azure イメージ検証プロセスでは、先頭の 1 MB と末尾の 512 バイトを削除し、ハッシュ関数を適用して、VHD ファイルからダイジェスト ファイルを生成します。署名手順に合わせて、ハッシュには _sha256_ が使用されます。



== ファイル署名検証ワークフローの概要

以下は、ファイル署名検証ワークフロー プロセスの概要です。

image::graphic_azure_check_signature.png[グラフィックアズールチェック署名]

* Azureイメージをダウンロードするには https://mysupport.netapp.com/site/["NetAppサポート サイト"^]ダイジェスト (.sig) ファイル、公開鍵証明書 (.pem) ファイル、チェーン証明書 (.pem) ファイルを抽出します。参照link:task-azure-download-digest-file.html["Azure イメージ ダイジェスト ファイルをダウンロードする"]詳細についてはこちらをご覧ください。
* 信頼チェーンの検証。
* 公開鍵証明書 (.pem) から公開鍵 (.pub) を抽出します。
* 抽出された公開鍵を使用してダイジェスト ファイルを復号化します。
* 先頭の 1 MB と末尾の 512 バイトを削除した後、イメージ ファイルから作成された一時ファイルの新しく生成されたダイジェストと結果を比較します。この手順は、OpenSSL コマンドライン ツールを使用して実行されます。  OpenSSL CLI ツールは、ファイルの一致が成功または失敗した場合に適切なメッセージを表示します。
+
[source, cli]
----
openssl dgst -verify <public_key> -keyform <form> <hash_function>
-signature <digest_file> -binary <temporary_file>
----

